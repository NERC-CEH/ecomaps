<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xmlns:py="http://genshi.edgewall.org/">
<xi:include href="layout.html" />
<head>
    <title>Create Analysis</title>
    <link rel="stylesheet" type="text/css" href="../layout/ecomaps.css"/>
</head>
<body>
    <h1>Create Analysis</h1>

    <form class="form-horizontal" method="POST">

        <div class="control-group">
            <label for="point_dataset_id" class="control-label">Choose point data:</label>

                <select name="point_dataset_id" id="point_dataset_id" class="controls">
                    <option py:for="dataset in c.point_datasets" value="${dataset.id}" py:attrs="{'selected':'True'} if defined('current_point_dataset_id') and dataset.id is current_point_dataset_id else {}">
                        ${dataset.name}
                    </option>
                </select>

        </div>

        <div class="control-group">
            <label for="coverage_dataset_ids" class="control-label">Choose coverage data:</label>

            <select multiple="true" id="coverage_dataset_ids" name="coverage_dataset_ids" class="controls">
                <option py:for="dataset in c.coverage_datasets" value="${dataset.id}" py:attrs="{'selected':'True'} if defined('current_coverage_dataset_ids') and dataset.id in current_coverage_dataset_ids else {}">
                    ${dataset.name}
                </option>
            </select>

        </div>

        <div class="control-group">
            <label for="analysis_name" class="control-label">Name of Analysis:</label>
            ${h.html_tags.text('analysis_name', class_='controls')}
        </div>

        <div class="control-group">
            <label for="parameter1" class="control-label">Parameter 1:</label>
            ${h.html_tags.text('parameter1', class_='controls')}
        </div>

        <div class="controls">
            <input type="submit" class="btn btn-primary btn-large pull-right control-group" name="submit" value="Run" />
        </div>
    </form>

<script type="text/javascript" language="JavaScript">
            $(function () {

            // Error span swap
            $("span.help-inline").each(function(index, el){

                // Find the parent control group
                // Swap the message with the input
                $(el).insertAfter($(el).next());
                $(el).closest("div.control-group").addClass("error");
            });
        })
</script>

</body>
</html>